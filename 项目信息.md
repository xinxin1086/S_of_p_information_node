========================================
汉江垂钓站 Vue 3 项目信息
========================================

【项目基本信息】
项目名称: vue
版本: 0.0.0
类型: 私有项目 (private)
模块类型: ES Module (type: module)
创建时间: 2024年
最后更新: 2025-01-10
开发端口: 4051

【技术栈】
前端框架: Vue 3.5.25 (Composition API + TypeScript)
构建工具: Vite 7.2.4
路由管理: Vue Router 4.6.3 (Hash模式)
状态管理: Pinia 3.0.4 + pinia-plugin-persistedstate 4.7.1
UI组件库: Element Plus 2.11.8 + @element-plus/icons-vue 2.3.1
HTTP客户端: Axios 1.13.2
开发语言: TypeScript (严格模式)
包管理器: pnpm

【核心依赖包】
Vue生态系统:
- @vueuse/core 11.3.0 (Vue组合式工具集)
- @vueuse/motion 3.0.3 (动画库)
- @tanstack/vue-virtual 3.13.12 (虚拟滚动)
- @tinymce/tinymce-vue 6.3.0 (富文本编辑器)
- @vee-validate/i18n 4.15.1 (表单验证)
- @vee-validate/rules 4.15.1 (验证规则)

功能扩展:
- echarts 6.0.0 (图表库)
- vue-echarts 8.0.1 (Vue图表组件)
- vue-cropper 1.1.4 (图片裁剪)
- vue-upload-component 2.8.23 (文件上传)
- vue3-photo-preview 0.3.0 (图片预览)
- vuedraggable 2.24.3 (拖拽组件)
- exceljs 4.4.0 (Excel处理)
- file-saver 2.0.5 (文件保存)
- lodash-es 4.17.21 (工具库)
- dayjs 1.11.19 (日期处理)
- @amap/amap-jsapi-loader 1.0.1 (高德地图)

【开发依赖】
- @vitejs/plugin-vue 6.0.2 (Vue插件)
- vite-plugin-vue-devtools 8.0.5 (开发工具)
- typescript-eslint 8.50.1 (TypeScript ESLint)
- eslint 9.39.2 (代码规范检查)
- esbuild 0.27.2 (代码构建)

【运行环境要求】
Node.js版本: ^20.19.0 || >=22.12.0

【项目结构】
src/
├── main.ts                    # 应用入口文件 (TypeScript)
├── App.vue                   # 根组件
├── config.ts                 # 项目配置 (API_BASE_URL等)
├── router/                   # 路由配置
│   ├── index.ts             # 路由主文件
│   └── guards.ts            # 路由守卫
├── stores/                   # Pinia状态管理 (TypeScript)
│   ├── index.ts             # 主store
│   ├── auth.ts              # 认证模块
│   ├── main.ts              # 主状态模块
│   ├── notice.ts            # 公告模块
│   ├── science.ts           # 科普模块
│   └── activity.ts          # 活动模块
├── layouts/                  # 布局组件
│   ├── AdminLayout.vue     # 管理员布局
│   ├── UserLayout.vue      # 用户布局
│   └── GuestLayout.vue     # 访客布局
├── views/                    # 页面组件 (52个Vue组件)
│   ├── public/             # 公共页面 (无需登录)
│   │   ├── HomeView.vue    # 公共首页
│   │   ├── LoginView.vue   # 登录页
│   │   ├── RegisterView.vue # 注册页
│   │   ├── AboutView.vue   # 关于页
│   │   ├── NotFound.vue    # 404页面
│   │   ├── activity/       # 公共活动页面
│   │   ├── science/        # 公共科普页面
│   │   ├── notice/         # 公共公告页面
│   │   └── discussion/     # 公共讨论页面
│   ├── user/               # 用户页面 (需登录)
│   │   ├── DashboardView.vue # 用户仪表盘
│   │   ├── common/         # 通用用户页面
│   │   ├── activity/       # 用户活动页面
│   │   └── organization/   # 组织用户页面
│   └── admin/              # 管理员页面
│       ├── AdminDashboard.vue # 管理员仪表盘
│       ├── content/        # 内容管理模块
│       ├── user/           # 用户管理模块
│       └── components/     # 管理员组件
├── components/              # 通用组件 (15个组件)
│   ├── common/             # 通用组件
│   ├── Forum/              # 论坛组件
│   └── [其他组件]
├── composables/             # 组合式函数 (TypeScript)
│   ├── useApiCall.ts       # API调用hook
│   └── useErrorHandler.ts  # 错误处理hook
├── utils/                   # 工具函数
│   ├── request.ts          # HTTP请求封装
│   ├── tokenManager.ts     # Token管理
│   ├── admin/              # 管理员工具
│   └── common/             # 通用工具
├── api/                     # API接口定义
│   ├── index.ts            # API主文件
│   └── extended.ts         # 扩展API
├── types/                   # TypeScript类型定义
│   ├── auth.ts             # 认证类型
│   ├── activity.ts         # 活动类型
│   ├── forum.ts            # 论坛类型
│   └── [其他类型]
├── config/                  # 配置文件
│   ├── api.ts              # API配置
│   └── activityStatus.ts   # 活动状态配置
└── styles/                  # 样式文件
    └── common/
        └── global.css      # 全局样式

【用户角色系统】
1. 管理员 (admin)
   - 路由前缀: /admin
   - 功能: 内容管理、用户管理、系统设置
   - 布局: AdminLayout

2. 组织用户 (organization)
   - 路由前缀: /user/weave
   - 功能: 活动创建、活动管理、数据统计
   - 布局: UserLayout

3. 普通用户 (user)
   - 路由前缀: /user
   - 功能: 个人资料、活动参与、论坛交流
   - 布局: UserLayout

4. 访客 (guest)
   - 路由前缀: /
   - 功能: 浏览公开内容
   - 布局: GuestLayout

【路由配置】
模式: Hash路由 (createWebHashHistory)
特点:
- 支持服务器部署兼容性
- 避免刷新页面404问题
- 包含路由守卫进行权限控制

【认证系统】
Token管理: 使用 tokenManager 工具类 (src/utils/tokenManager.ts)
Token存储: localStorage (access_token, refresh_token)
请求头格式: Bearer {token}
自动处理:
- Token自动刷新机制
- 401状态自动跳转登录页
- 请求拦截器自动添加认证头
- 响应拦截器处理权限过期
- 登录时清理旧Token

【状态管理】
Pinia架构 (TypeScript):
- 主store (main.ts): 全局状态、主题、侧边栏状态
- 模块store (TypeScript):
  - auth.ts: 认证状态、用户信息
  - notice.ts: 公告数据状态
  - science.ts: 科普内容状态
  - activity.ts: 活动数据状态
- 持久化: 使用pinia-plugin-persistedstate
- 类型安全: 所有store都有完整的TypeScript类型定义

【样式系统】
基础样式: Microsoft YaHei字体，全局重置
UI框架: Element Plus组件库
自定义样式: CSS模块化管理

【开发工具】
Vite插件:
- @vitejs/plugin-vue: Vue单文件支持
- vite-plugin-vue-devtools: 开发调试工具
- 自定义dev-inject插件: 开发监控 (注入 /sdk/dev-monitor.js)

TypeScript配置:
- 严格模式 (strict: true)
- 路径别名: @/* 指向 ./src/*
- 目标ES2020, 模块ESNext
- 完整类型检查

开发服务器:
- 端口: 4051
- HMR: 启用热模块替换
- 代理: /api 代理到后端
- TypeScript类型检查: 实时

【部署配置】
构建命令: npm run build
预览命令: npm run preview
开发命令: npm run dev

【最新功能更新】(2025-01-10)
1. 讨论区功能模块
   - 公共讨论列表 (DiscussionList.vue)
   - 讨论详情页 (DiscussionDetail.vue)
   - 支持评论和互动功能
2. TypeScript类型系统完善
   - 完整的类型定义文件 (types/目录)
   - 组合式函数 (composables/)
   - 类型安全的API调用
3. Token管理机制升级
   - 使用tokenManager工具类
   - 支持access_token和refresh_token
   - 自动刷新Token机制
4. 组织用户功能
   - 组织用户仪表盘 (OrganizationDashboard.vue)
   - 活动创建、编辑、统计功能
   - 我的活动管理页面
5. 活动预约功能
   - 我的预约 (MyBookings.vue)
   - 预约历史 (BookingHistory.vue)
6. 用户通知功能
   - 通知视图 (NotificationView.vue)
7. 账户设置功能
   - 账户设置页 (AccountSettingsView.vue)
   - 个人资料编辑 (ProfileEditView.vue)
8. 全局搜索功能
   - 搜索页面 (SearchView.vue)
   - 支持全文搜索

【管理员后台路由结构】
├── 管理员控制台 (/admin/dashboard)
├── 内容管理模块
│   ├── 内容审核
│   │   ├── 公告审核 (/admin/content/notice-review)
│   │   ├── 科普审核 (/admin/content/science-review)
│   │   └── 活动审核 (/admin/content/activity-review)
│   ├── 内容发布
│   │   ├── 公告管理 (/admin/content/notice)
│   │   ├── 公告编辑器 (/admin/content/notice/editor)
│   │   ├── 科普管理 (/admin/content/science)
│   │   └── 活动管理 (/admin/content/activity)
│   └── 讨论管理
│       ├── 活动讨论管理 (/admin/content/activity-discussion)
│       └── 讨论评论管理 (/admin/content/discussion-comment)
└── 用户管理模块
    ├── 管理员管理
    │   ├── 管理员列表 (/admin/user/admin)
    │   ├── 添加管理员 (/admin/user/admin/add)
    │   └── 编辑管理员 (/admin/user/admin/edit/:id)
    └── 普通用户管理
        ├── 用户列表 (/admin/user/user)
        ├── 用户统计 (/admin/user/stats)
        ├── 添加用户 (/admin/user/user/add)
        └── 编辑用户 (/admin/user/user/edit/:id)

【特色功能】
1. 多角色权限管理系统 (管理员、组织用户、普通用户、访客)
2. TypeScript严格模式类型检查
3. 响应式设计支持移动端
4. 组合式API (Composition API)
5. Token自动刷新机制
6. 富文本编辑器集成
7. 图表可视化展示 (ECharts)
8. 文件上传和图片裁剪
9. 地图集成 (高德地图)
10. Excel数据导入导出
11. 虚拟滚动优化性能
12. 拖拽功能实现
13. 多级菜单导航
14. 全局搜索功能
15. 讨论区互动功能
16. 活动预约系统

========================================
项目配置文件说明
========================================

vite.config.ts:
- 使用Hash路由模式
- 配置@路径别名指向src目录
- 集成Vue开发工具 (vite-plugin-vue-devtools)
- 包含开发监控注入插件 (dev-inject)
- 开发服务器端口: 4051
- HMR热模块替换支持

tsconfig.json:
- TypeScript严格模式
- 目标ES2020, 模块ESNext
- 路径别名配置 @/*
- 完整类型检查

package.json:
- 严格的Node.js版本要求 (^20.19.0 || >=22.12.0)
- 完整的Vue3生态系统依赖
- TypeScript类型定义
- 丰富的第三方功能库
- 模块化ES项目结构
- 包管理器: pnpm

index.html:
- 标题: "社区交流平台"
- 无前端框架名在title中
- 入口: /src/main.js

## 整合后数据库表设计

### 现有表结构
#### 1. 用户信息表 (user_info)
**表说明：** 存储普通用户的基本信息（保持原有字段不变）
```sql
CREATE TABLE user_info (
  id int PRIMARY KEY AUTO_INCREMENT COMMENT '唯一用户标识（自增）',
  account varchar(80) NOT NULL UNIQUE COMMENT '登录账号（不可重复）',
  password_hash varchar(255) NOT NULL COMMENT '加密后的密码',
  username varchar(120) NOT NULL UNIQUE COMMENT '用户显示名称（不可重复）',
  phone varchar(20) NOT NULL UNIQUE COMMENT '用户联系电话（不可重复）',
  email varchar(50) NULL COMMENT '用户邮箱（可选）',
  avatar varchar(200) NULL COMMENT '头像文件路径（可选）',
  role varchar(20) NULL COMMENT '用户权限标识（如admin）'
);
```

#### 2. 管理员信息表 (admin_info)
**表说明：** 存储管理员的基本信息（保持原有字段不变）
```sql
CREATE TABLE admin_info (
  id int PRIMARY KEY AUTO_INCREMENT COMMENT '管理员唯一标识（自增）',
  account varchar(80) NOT NULL UNIQUE COMMENT '管理员登录账号（不可重复）',
  password_hash varchar(255) NOT NULL COMMENT '加密后的管理员密码',
  username varchar(120) NOT NULL UNIQUE COMMENT '管理员显示名称（不可重复）',
  phone varchar(20) NOT NULL UNIQUE COMMENT '管理员联系电话（不可重复）',
  email varchar(50) NULL COMMENT '管理员邮箱（可选）',
  avatar varchar(200) NULL COMMENT '管理员头像路径（可选）',
  role varchar(20) NULL COMMENT '管理员权限标识'
);
```

#### 3. 公告表 (notice)
**表说明：** 存储系统公告信息（保持原有字段不变）
```sql
CREATE TABLE notice (
  id bigint PRIMARY KEY AUTO_INCREMENT COMMENT '公告唯一标识（自增，支持更大数据量）',
  release_time timestamp(6) NOT NULL UNIQUE COMMENT '记录公告发布的精确时间',
  release_title varchar(150) NOT NULL COMMENT '公告的标题（长度限制 150 字符）',
  release_notice varchar(255) NOT NULL COMMENT '公告的正文内容（长度限制 255 字符）',
  expiration timestamp(6) NULL COMMENT '公告失效的时间（可选）',
  notice_type varchar(25) NULL COMMENT '区分公告类别（如 "系统通知"）',
  update_time timestamp(6) NULL COMMENT '公告最后修改的时间（可选）'
);
```

### 新增功能表结构（基于现有表扩展）

#### 4. 科普文章表 (science_articles)
**表说明：** 存储科普知识文章，与现有user_info表关联
```sql
CREATE TABLE science_articles (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  title varchar(200) NOT NULL COMMENT '文章标题',
  content text NOT NULL COMMENT '文章内容',
  author_account varchar(80) NOT NULL COMMENT '作者账号，关联user_info.account',
  cover_image varchar(255) COMMENT '封面图片URL',
  status enum('draft', 'pending', 'published', 'rejected') DEFAULT 'draft',
  like_count int DEFAULT 0 COMMENT '点赞次数',
  view_count int DEFAULT 0 COMMENT '浏览次数',
  published_at timestamp NULL COMMENT '发布时间',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (author_account) REFERENCES user_info(account)
);
```

#### 5. 活动表 (activities)
**表说明：** 存储活动信息，与现有user_info表关联
```sql
CREATE TABLE activities (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  title varchar(200) NOT NULL COMMENT '活动标题',
  description text NOT NULL COMMENT '活动描述',
  organizer_account varchar(80) NOT NULL COMMENT '组织者账号，关联user_info.account',
  location varchar(200) COMMENT '活动地点',
  start_time datetime NOT NULL COMMENT '开始时间',
  end_time datetime NOT NULL COMMENT '结束时间',
  max_participants int COMMENT '最大参与人数',
  current_participants int DEFAULT 0 COMMENT '当前参与人数',
  status enum('draft', 'published', 'ongoing', 'completed', 'cancelled') DEFAULT 'draft',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (organizer_account) REFERENCES user_info(account)
);
```

#### 6. 活动预约表 (activity_bookings)
**表说明：** 存储用户活动预约信息，关联activities和user_info表
```sql
CREATE TABLE activity_bookings (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  activity_id bigint NOT NULL COMMENT '活动ID',
  user_account varchar(80) NOT NULL COMMENT '用户账号，关联user_info.account',
  booking_time datetime DEFAULT CURRENT_TIMESTAMP COMMENT '预约时间',
  status enum('booked', 'cancelled', 'attended') DEFAULT 'booked',
  notes text COMMENT '备注',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (activity_id) REFERENCES activities(id) ON DELETE CASCADE,
  FOREIGN KEY (user_account) REFERENCES user_info(account),
  UNIQUE KEY unique_booking (activity_id, user_account)
);
```

#### 7. 活动评论表 (activity_comments)
**表说明：** 存储活动评论，关联activities和user_info表
```sql
CREATE TABLE activity_comments (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  activity_id bigint NOT NULL COMMENT '活动ID',
  user_account varchar(80) NOT NULL COMMENT '用户账号，关联user_info.account',
  content text NOT NULL COMMENT '评论内容',
  rating tinyint COMMENT '评分1-5',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (activity_id) REFERENCES activities(id) ON DELETE CASCADE,
  FOREIGN KEY (user_account) REFERENCES user_info(account)
);
```

#### 8. 论坛帖子表 (forum_posts)
**表说明：** 存储论坛帖子信息，与现有user_info表关联
```sql
CREATE TABLE forum_posts (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  title varchar(200) NOT NULL COMMENT '帖子标题',
  content text NOT NULL COMMENT '帖子内容',
  author_account varchar(80) NOT NULL COMMENT '作者账号，关联user_info.account',
  category varchar(50) DEFAULT 'default' COMMENT '分类',
  view_count int DEFAULT 0 COMMENT '浏览次数',
  like_count int DEFAULT 0 COMMENT '点赞次数',
  comment_count int DEFAULT 0 COMMENT '评论次数',
  status enum('published', 'draft', 'deleted') DEFAULT 'published',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (author_account) REFERENCES user_info(account)
);
```

#### 9. 论坛评论表 (forum_comments)
**表说明：** 存储论坛评论信息，关联forum_posts和user_info表
```sql
CREATE TABLE forum_comments (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  post_id bigint NOT NULL COMMENT '帖子ID',
  author_account varchar(80) NOT NULL COMMENT '评论者账号，关联user_info.account',
  content text NOT NULL COMMENT '评论内容',
  parent_id bigint DEFAULT NULL COMMENT '父评论ID',
  status enum('published', 'deleted') DEFAULT 'published',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES forum_posts(id) ON DELETE CASCADE,
  FOREIGN KEY (author_account) REFERENCES user_info(account),
  FOREIGN KEY (parent_id) REFERENCES forum_comments(id)
);
```

#### 10. 用户点赞表 (user_likes)
**表说明：** 统一管理用户点赞功能，支持多种内容类型
```sql
CREATE TABLE user_likes (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  user_account varchar(80) NOT NULL COMMENT '用户账号，关联user_info.account',
  target_type enum('post', 'article', 'comment') NOT NULL COMMENT '目标类型',
  target_id bigint NOT NULL COMMENT '目标ID',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_account) REFERENCES user_info(account),
  UNIQUE KEY unique_like (user_account, target_type, target_id)
);
```

#### 11. 附件表 (attachments)
**表说明：** 统一管理文件上传，关联user_info表
```sql
CREATE TABLE attachments (
  id bigint PRIMARY KEY AUTO_INCREMENT,
  uploader_account varchar(80) NOT NULL COMMENT '上传者账号，关联user_info.account',
  file_name varchar(255) NOT NULL COMMENT '文件名',
  file_path varchar(500) NOT NULL COMMENT '文件路径',
  file_size bigint NOT NULL COMMENT '文件大小',
  file_type varchar(50) NOT NULL COMMENT '文件类型',
  usage_type enum('avatar', 'cover', 'attachment') NOT NULL COMMENT '用途类型',
  created_at timestamp DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (uploader_account) REFERENCES user_info(account)
);
```

### 整合后数据库关系说明

#### 核心设计原则
1. **保持现有表结构完整**：user_info、admin_info、notice三张表保持原有字段不变
2. **使用账号作为外键关联**：所有新表通过account字段与user_info表关联
3. **数据一致性保障**：通过外键约束确保数据完整性

#### 表关系架构
- **现有核心表（保持不变）**：
  - `user_info`：普通用户基础信息
  - `admin_info`：管理员基础信息
  - `notice`：系统公告信息

- **新增功能表（基于现有表扩展）**：
  - `science_articles`：科普文章（关联user_info.account）
  - `activities`：活动信息（关联user_info.account）
  - `activity_bookings`：活动预约（关联user_info.account）
  - `activity_comments`：活动评论（关联user_info.account）
  - `forum_posts`：论坛帖子（关联user_info.account）
  - `forum_comments`：论坛评论（关联user_info.account）
  - `user_likes`：用户点赞（关联user_info.account）
  - `attachments`：文件附件（关联user_info.account）

#### 关键设计特点
1. **外键策略**：使用账号（account）而非ID作为外键，避免用户ID变更时的关联问题
2. **权限控制**：通过user_info.role和admin_info.role实现细粒度权限管理
3. **数据完整性**：使用ON DELETE CASCADE确保级联删除，维护数据一致性
4. **扩展性**：新表结构支持后续功能扩展，不影响现有系统
5. **性能优化**：合理的索引设计支持高效查询

#### 索引建议
```sql
-- 现有表索引优化
ALTER TABLE user_info ADD INDEX idx_role (role);
ALTER TABLE notice ADD INDEX idx_release_time (release_time);
ALTER TABLE notice ADD INDEX idx_notice_type (notice_type);

-- 新增表索引
CREATE INDEX idx_posts_author ON forum_posts(author_account);
CREATE INDEX idx_posts_status ON forum_posts(status);
CREATE INDEX idx_comments_post ON forum_comments(post_id);
CREATE INDEX idx_activities_organizer ON activities(organizer_account);
CREATE INDEX idx_activities_status ON activities(status);
CREATE INDEX idx_bookings_activity ON activity_bookings(activity_id);
CREATE INDEX idx_bookings_user ON activity_bookings(user_account);
CREATE INDEX idx_articles_author ON science_articles(author_account);
CREATE INDEX idx_likes_user ON user_likes(user_account);
CREATE INDEX idx_attachments_uploader ON attachments(uploader_account);
```

需要的后端接口：

### 认证相关接口
- POST /api/auth/login - 用户登录
- POST /api/auth/register - 用户注册
- GET /api/auth/me - 获取当前用户信息
- POST /api/auth/logout - 用户登出
- PUT /api/auth/password - 修改密码

### 用户管理接口
- GET /api/users - 获取用户列表
- POST /api/users - 创建用户
- GET /api/users/:id - 获取用户详情
- PUT /api/users/:id - 更新用户信息
- DELETE /api/users/:id - 删除用户
- PUT /api/users/:id/avatar - 更新用户头像
- GET /api/users/stats - 获取用户统计信息

### 公告管理接口
- GET /api/notices - 获取公告列表
- POST /api/notices - 创建公告
- GET /api/notices/:id - 获取公告详情
- PUT /api/notices/:id - 更新公告
- DELETE /api/notices/:id - 删除公告
- PUT /api/notices/:id/status - 更新公告状态

### 活动管理接口
- GET /api/activities - 获取活动列表
- POST /api/activities - 创建活动
- GET /api/activities/:id - 获取活动详情
- PUT /api/activities/:id - 更新活动
- DELETE /api/activities/:id - 删除活动
- POST /api/activities/:id/book - 预约活动
- GET /api/activities/:id/participants - 获取参与者列表
- GET /api/my/bookings - 获取我的预约

### 科普内容接口
- GET /api/science - 获取科普文章列表
- POST /api/science - 创建科普文章
- GET /api/science/:id - 获取科普文章详情
- PUT /api/science/:id - 更新科普文章
- DELETE /api/science/:id - 删除科普文章
- PUT /api/science/:id/status - 更新文章状态

### 论坛相关接口（可选）
- GET /api/posts - 获取帖子列表
- POST /api/posts - 创建帖子
- GET /api/posts/:id - 获取帖子详情
- PUT /api/posts/:id - 更新帖子
- DELETE /api/posts/:id - 删除帖子
- GET /api/posts/:id/comments - 获取评论列表
- POST /api/posts/:id/comments - 添加评论

### 搜索接口
- GET /api/search - 全局搜索
- GET /api/search/notices - 搜索公告
- GET /api/search/activities - 搜索活动
- GET /api/search/science - 搜索科普

### 文件上传接口
- POST /api/upload/avatar - 上传用户头像
- POST /api/upload/activity - 上传活动图片
- POST /api/upload/science - 上传科普图片
- POST /api/upload/cover - 上传封面图片

注意事项：
- 所有需要认证的接口都需要在请求头中包含 Authorization: Bearer {token}
- 分页接口支持 page 和 pageSize 参数
- 列表接口支持排序参数（sortBy sortOrder）
- 搜索接口支持 keyword 参数

## 项目结构概览

项目采用Vue 3 + TypeScript + Vite构建,包含完整的类型定义和组合式API。

**主要目录结构已在上文【项目结构】中详细说明**

**统计信息:**
- Vue组件总数: 52个
- 通用组件: 15个
- TypeScript类型文件: 10+个
- Pinia状态管理模块: 6个
- 工具函数: 完整的utils和composables目录

**核心架构:**
- 使用Hash路由模式 (createWebHashHistory)
- 完整的TypeScript类型系统
- 组合式API (Composition API)
- Pinia状态管理 + 持久化
- Axios请求封装 + Token自动刷新
- 完整的路由守卫和权限控制

## 用户角色权限体系

### 四类用户角色权限说明

#### 1. 管理员 (admin)
**权限范围：** 系统最高权限，可管理所有内容和功能
- **用户管理：** 增删改查所有用户、分配角色权限
- **内容管理：** 管理所有公告、科普内容、活动资讯
- **审核权限：** 审核用户提交的所有内容（公告、科普、活动、讨论）
- **论坛管理：** 管理论坛帖子、评论、分类、标签
- **系统管理：** 访问后台管理系统、查看统计数据、系统配置
- **特殊功能：** 数据导出、批量操作、系统监控

#### 2. 组织用户 (organization)
**权限范围：** 可创建和管理组织活动，具备内容发布权限
- **活动管理：** 创建、编辑、删除自己发布的活动资讯
- **内容发布：** 发布科普文章、活动相关信息
- **用户互动：** 参与论坛讨论、发表评论
- **预约管理：** 查看活动预约情况、管理参与者
- **数据统计：** 查看自己发布内容的数据统计
- **个人管理：** 管理个人资料、设置

#### 3. 普通用户 (user)
**权限范围：** 基础浏览和互动权限
- **内容浏览：** 查看所有公开内容（公告、科普、活动资讯）
- **论坛互动：** 查看帖子和评论、发表评论、点赞
- **活动预约：** 预约参加活动、查看预约状态
- **个人管理：** 管理个人资料、修改密码、查看预约记录
- **搜索功能：** 搜索公开内容
- **基础功能：** 收藏、分享内容

#### 4. 访客 (guest)
**权限范围：** 仅限公开内容浏览，无需注册登录
- **内容浏览：** 查看公开的公告、科普文章、活动资讯
- **基础信息：** 查看平台介绍、联系方式等静态页面
- **限制说明：** 无法进行任何互动操作（评论、预约、发帖等）

### 角色关系说明
- **权限继承：** 管理员 > 组织用户 > 普通用户 > 访客
- **角色转换：** 管理员可在后台为用户分配不同角色
- **注册限制：** 新用户注册时可选择"组织用户"或"普通用户"角色
- **登录方式：** 组织用户和普通用户使用统一的登录接口，通过角色区分权限

项目特色：
1. 基于Vue 3 + TypeScript + Element Plus的现代化前端架构
2. 完整的四层用户权限管理体系（管理员、组织用户、普通用户、访客）
3. TypeScript严格模式，完整的类型定义系统
4. 响应式设计，支持移动端访问
5. 组件化开发，代码复用性高（52个Vue组件）
6. 完善的状态管理和路由守卫
7. 统一的HTTP请求封装和Token自动刷新机制
8. 丰富的UI组件和工具函数库
9. 讨论区功能支持用户互动
10. 活动预约系统
11. 文件上传和图片处理功能
12. 数据可视化和图表展示

技术栈：
- 前端框架：Vue 3.5.25 (Composition API + TypeScript严格模式)
- 状态管理：Pinia 3.0.4 + pinia-plugin-persistedstate
- 路由管理：Vue Router 4.6.3 (Hash模式)
- UI框架：Element Plus 2.11.8
- HTTP客户端：Axios 1.13.2
- 构建工具：Vite 7.2.4
- 开发语言：TypeScript (严格模式)
- CSS预处理：原生CSS
- 图表库：ECharts 6.0.0
- 富文本编辑：TinyMCE
- 地图服务：高德地图
- 包管理器：pnpm
- 开发服务器端口：4051

开发注意事项：
1. 使用Hash路由模式确保部署兼容性
2. 请求令牌格式：Bearer {token}（注意Bearer后面有空格）
3. 统一使用Element Plus组件库
4. 遵循Vue 3 Composition API最佳实践
5. 所有状态管理使用TypeScript类型定义
6. 响应式设计确保移动端兼容性
7. 完善的错误处理和用户提示
8. 统一的代码风格和命名规范
9. 使用tokenManager管理Token，支持自动刷新
10. API调用使用utils/request.ts封装